# [IUS Community Project](https://ius.io/)

# プロジェクトの目的

- RHEL/CentOS 向けに、高品質の RPM パッケージを作成する
- Upstream がリリースされたら速やかにパッケージを追随する
- 元の RPM パッケージを自動的に置き換えない

# 根本原理

## 概要

Enterprise Linuxに含まれるパッケージは、それぞれのアップストリームと比較して著しく古くなっている場合があります。また、Red Hat の[バックポート](https://access.redhat.com/security/updates/backporting)セキュリティフィックスに新しい機能が追加されることは滅多にありません。このアプローチによりOS全体として非常に安定した状態を保てますが、アップストリームにある新しい機能を使いたいユーザーにとってはフラストレーションが溜まることになります。

IUS は __I__nline with __U__pstream __S__table の略です。私達のパッケージ群はオリジナルのパッケージ群とは根本的に異なり、それぞれのソフトウェアの最新版に追随します。このアプローチには本質的なリスクがあります。それは、新しいアップストリーム版には、オリジナルのパッケージを使っている分にはあり得なかったバグが発生する可能性があるということです。とは言え、もちろん私達はそれらのパッケージの品質を保証して、それらが安定版のリポジトリに取り込まれる前に問題を解決するべく最大限に努力しています。IUSのユーザーはシステムの安定性のごく一部を犠牲にすることで、新しい機能を享受できます。IUSパッケージを使うということは、暗黙にこのトレードオフを受け入れるということです。本番以外の環境を使って[早期テスト](https://ius.io/Contributing/#early-testing)に参加することで、このリスクを最小にすることができます。

## 元のパッケージを上書きしない

IUSが提供するのは[安全な置き換え](https://ius.io/SafeRepo/#safe-replacement-package)で[同時（並行）インストール可能](https://ius.io/SafeRepo/#parallel-installable-package)なパッケージだけです。このためユーザーは安心してIUSに参加できます。IUSパッケージが元のパッケージを上書きすることはなく、明示的に選択されたパッケージだけがインストールされます。これにより、Enterprize Linuxの大半の部分についての安定性を維持しながら、PHP,Python,MySQLなどの最新版を利用できます。

## リリースポリシー

私達の既存のパッケージに対するアップデートは、まず[テスト用リポジトリ](https://dl.iuscommunity.org/pub/ius/testing/)でリリースされます。おおむね２週間の間に問題が報告されなかった場合、アップデートされたパッケージが[安定版リポジトリ](https://dl.iuscommunity.org/pub/ius/stable/)に取り込まれます。ただし、安定性が保証されている場合、私達はこれより早く安定版に取り込むための権利を有していることに留意してください。

安定版リポジトリにまだ追加されていない新しいパッケージについては、このリリースポリシーは適用されません。新しいパッケージの追加要求が行われた場合、要求者はそのパッケージのテストに合意する必要があります。すべて問題なく動作していることを要求者が確認することで、そのパッケージが安定版リポジトリに追加されるのに適格と判断されます。

## 命名規則

IUSパッケージには、基本的に以下の命名規則が適用されます。

```
{name}{major_version}{minor_version}u
```

EPELのパッケージでも、python34やzabbix22といった、似たようなフォーマットが散見されます。オリジナルとは異なった名前を付けることには、以下の利点があります。

- 通常のシステムアップデート時に、元の同等のパッケージが新しい版で上書きされないことを保証できます。
- ユーザーはIUSリポジトリ全体を購読できますが、その中の一部だけを利用できます。元のパッケージと同じ名前を使うような他のリポジトリでは、このような柔軟性はありません。
- ひとつのリポジトリの中で、あるアプリケーションについて複数のブランチを提供できます。
- サードパーティーのリポジトリを複数使っている場合に、管理がより明確になります。たとえば、EPELには元のphpに対してビルドされるphp peclモジュールが複数あります。もしあなたが、同じ名前を持つphpパッケージの新バージョンを提供するリポジトリを追加した場合、EPELのphp peclモジュールはそれらと組み合わせては動作しなくなります。どのphpパッケージがどれと組み合わせて動いているのかを、正確にかつ迅速に判断するのは困難です。

この命名規則に関する唯一の欠点は、元のパッケージからIUSパッケージに直接アップグレードできないことです。すべての要素を考慮した結果、私達はこの利便性の方が遥かに優ると考えています。

メジャー番号とマイナー番号を付加することに加え、ほとんどのIUSパッケージには"u"サフィックスが付きます。このサフィックスを付け始めたのは2010年からで、Red Hatが[RHEL 5.6でベースリポジトリにphp53という名前のパッケージを追加する](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/5/html/5.6_Release_Notes/ar01s04.html)ことをアナウンスしてからです。これにより私達が元々提供していたphp53パッケージと名前が衝突したため、[変更を決断](https://lists.launchpad.net/ius-community/msg00145.html)することになりました。David Straussが"u"サフィックスを付けて衝突を回避することを[私達のメーリングリストで提案](https://lists.launchpad.net/ius-community/msg00151.html)しました。私達はこの提案を気に入って、[その実装を進めました](https://bugs.launchpad.net/ius/+bug/691755)。同時に私達は、これは[一度限りの修正で済むと思っていました](https://lists.launchpad.net/ius-community/msg00152.html)。ところが、Red Hatが2013年に[Software Collections](https://developerblog.redhat.com/2013/09/12/rhscl1-ga/)(RHSCL)という製品をリリースしました。これにより、既存のIUSパッケージの一部の名前が重複してしまいました。さらなる衝突が起こらないか心配になりましたが、RHSCLはデフォルトでは有効にならないことを知って、いったんは安心しました。ところがその後Red Hatは、RHEL5のベースリポジトリにmysql55 SCLパッケージを追加することを決定しました。SCLのメタパッケージであるmysql55は、私達の既存のパッケージと同じ名前でした。私達はmysql55パッケージをmysql55uに変更することで名前の衝突を回避しましたが、その際シームレスなアップグレードの方法を提供することはできませんでした。それ以来、私達はすべてのパッケージの名前に"u"を付けることで、二度と同じ目に遭わないようにしています。



```
yum install -y https://centos7.iuscommunity.org/ius-release.rpm
```
